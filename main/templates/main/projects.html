{% extends 'main/base.html' %}
{% block content %}

<!-- ðŸ”¥ Projects Showcase -->
<div class="container py-5">
  <h2 class="mb-5 text-center fw-bold section-title-enhanced" data-aos="fade-down">
    <i class="fas fa-layer-group text-primary me-2 title-icon"></i> My Featured Projects
  </h2>

  <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
    {% for project in projects %}
    <div class="col" data-aos="zoom-in-up" data-aos-delay="{{ forloop.counter0|add:'100' }}">
      <div class="card h-100 border-0 rounded-4 shadow project-card-enhanced position-relative overflow-hidden">
        <div class="project-img-wrapper-enhanced">
          <img src="{{ project.image.url }}" class="card-img-top project-img-enhanced" alt="{{ project.title }}">
          <div class="project-overlay-enhanced d-flex justify-content-center align-items-center">
            <div class="overlay-actions">
              {% if project.github_link %}
              <a href="{{ project.github_link }}" target="_blank" class="btn btn-sm btn-outline-light me-2 action-btn-enhanced">
                <i class="fab fa-github me-1"></i> GitHub
              </a>
              {% endif %}
              {% if project.demo_link %}
              <a href="{{ project.demo_link }}" target="_blank" class="btn btn-sm btn-light action-btn-enhanced">
                <i class="fas fa-play-circle me-1"></i> Live Demo
              </a>
              {% endif %}
            </div>
          </div>
          <!-- Status Badge -->
          <div class="project-status-badge">
            <span class="status-dot"></span>
            <span>Active</span>
          </div>
        </div>
        <div class="card-body card-body-enhanced">
          <h5 class="card-title fw-semibold project-title-enhanced">{{ project.title }}</h5>
          <p class="card-text text-muted small project-desc-enhanced">{{ project.description|truncatechars:140 }}</p>
          {% if project.technologies %}
          <div class="mt-3 tech-stack-enhanced">
            {% for tech in project.technologies.all %}
              <span class="badge tech-badge-enhanced me-1 mb-1">{{ tech.name }}</span>
            {% endfor %}
          </div>
          {% endif %}
        </div>
        <!-- Card Shine Effect -->
        <div class="card-shine-enhanced"></div>
      </div>
    </div>
    {% empty %}
    <div class="col-12">
      <div class="empty-state-enhanced text-center">
        <div class="empty-icon-wrapper">
          <i class="fas fa-code empty-icon"></i>
        </div>
        <h3 class="empty-title">Projects Coming Soon</h3>
        <p class="empty-desc">ðŸš§ Projects will appear here soon. Stay tuned!</p>
      </div>
    </div>
    {% endfor %}
  </div>
</div>

<!-- âœ¨ Enhanced Styles -->
<style>
/* Enhanced Projects Styling using enhanced-base.html theme */
:root {
  /* Use enhanced-base.html color system */
  --project-primary: var(--primary-dark, #0a1628);
  --project-secondary: var(--secondary-medium, #2563eb);
  --project-accent: var(--accent-primary, #06b6d4);
  --project-surface: var(--surface-primary, rgba(255, 255, 255, 0.95));
  --project-text: var(--text-primary, #0f172a);
  --project-text-secondary: var(--text-secondary, #334155);
  --project-shadow: var(--shadow-lg, 0 8px 32px rgba(15, 23, 42, 0.12));
  --project-gradient: var(--gradient-accent, linear-gradient(135deg, #06b6d4 0%, #2563eb 100%));
  --project-transition: var(--transition-smooth, all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94));
}

/* Enhanced Section Title */
.section-title-enhanced {
  font-family: 'Space Grotesk', sans-serif;
  color: var(--project-text);
  font-size: 2.5rem;
  font-weight: 800;
  letter-spacing: -0.02em;
  position: relative;
}

.title-icon {
  background: var(--project-gradient);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  font-size: 2.2rem;
  animation: iconPulse 3s ease-in-out infinite;
}

@keyframes iconPulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.05); }
}

/* Enhanced Project Card */
.project-card-enhanced {
  background: var(--project-surface);
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  box-shadow: var(--project-shadow);
  transition: var(--project-transition);
  position: relative;
  overflow: hidden;
}

.project-card-enhanced::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 2px;
  background: var(--project-gradient);
  z-index: 2;
}

.project-card-enhanced:hover {
  transform: translateY(-8px) scale(1.02);
  box-shadow: 0 20px 48px rgba(6, 182, 212, 0.25);
  border-color: rgba(6, 182, 212, 0.3);
}

/* Enhanced Image Wrapper */
.project-img-wrapper-enhanced {
  position: relative;
  height: 200px;
  overflow: hidden;
  border-radius: 0.75rem 0.75rem 0 0;
  background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
}

.project-img-enhanced {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: var(--project-transition);
  filter: brightness(1) contrast(1.05);
}

.project-card-enhanced:hover .project-img-enhanced {
  transform: scale(1.05);
  filter: brightness(1.1) contrast(1.1);
}

/* Enhanced Overlay */
.project-overlay-enhanced {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: linear-gradient(135deg, rgba(10, 22, 40, 0.85) 0%, rgba(37, 99, 235, 0.85) 100%);
  opacity: 0;
  transition: var(--project-transition);
  z-index: 3;
}

.project-card-enhanced:hover .project-overlay-enhanced {
  opacity: 1;
}

.overlay-actions {
  transform: translateY(20px);
  transition: var(--project-transition);
}

.project-card-enhanced:hover .overlay-actions {
  transform: translateY(0);
}

.action-btn-enhanced {
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border-radius: 12px !important;
  font-weight: 600;
  transition: var(--project-transition);
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
}

.action-btn-enhanced:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
}

/* Status Badge */
.project-status-badge {
  position: absolute;
  top: 1rem;
  right: 1rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  background: rgba(16, 185, 129, 0.9);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  color: white;
  padding: 0.4rem 0.8rem;
  border-radius: 20px;
  font-size: 0.8rem;
  font-weight: 600;
  z-index: 2;
}

.status-dot {
  width: 6px;
  height: 6px;
  background: white;
  border-radius: 50%;
  animation: statusPulse 2s ease-in-out infinite;
}

@keyframes statusPulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}

/* Enhanced Card Body */
.card-body-enhanced {
  background: var(--project-surface);
  position: relative;
  z-index: 2;
}

.project-title-enhanced {
  font-family: 'Space Grotesk', sans-serif;
  color: var(--project-text);
  font-size: 1.4rem;
  font-weight: 700;
  letter-spacing: -0.01em;
  margin-bottom: 0.75rem;
}

.project-desc-enhanced {
  color: var(--project-text-secondary);
  line-height: 1.6;
  font-size: 0.95rem;
}

/* Enhanced Tech Stack */
.tech-stack-enhanced {
  display: flex;
  flex-wrap: wrap;
  gap: 0.4rem;
}

.tech-badge-enhanced {
  background: linear-gradient(135deg, rgba(6, 182, 212, 0.1) 0%, rgba(37, 99, 235, 0.1) 100%);
  color: var(--project-accent);
  border: 1px solid rgba(6, 182, 212, 0.2);
  border-radius: 14px;
  padding: 0.35rem 0.8rem;
  font-size: 0.8rem;
  font-weight: 600;
  transition: var(--project-transition);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
}

.tech-badge-enhanced:hover {
  background: var(--project-gradient);
  color: white;
  border-color: transparent;
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(6, 182, 212, 0.3);
}

/* Card Shine Effect */
.card-shine-enhanced {
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
  transition: left 0.8s ease;
  z-index: 4;
  pointer-events: none;
}

.project-card-enhanced:hover .card-shine-enhanced {
  left: 100%;
}

/* Enhanced Empty State */
.empty-state-enhanced {
  padding: 4rem 2rem;
  background: var(--project-surface);
  border-radius: 24px;
  border: 1px solid rgba(255, 255, 255, 0.2);
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
  box-shadow: var(--project-shadow);
}

.empty-icon-wrapper {
  width: 80px;
  height: 80px;
  background: var(--project-gradient);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 0 auto 1.5rem;
  box-shadow: 0 8px 24px rgba(6, 182, 212, 0.3);
}

.empty-icon {
  font-size: 2rem;
  color: white;
}

.empty-title {
  font-family: 'Space Grotesk', sans-serif;
  color: var(--project-text);
  font-size: 1.8rem;
  font-weight: 700;
  margin-bottom: 1rem;
}

.empty-desc {
  color: var(--project-text-secondary);
  font-size: 1.1rem;
  line-height: 1.6;
}

/* Enhanced Animations */
@keyframes cardFloat {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-5px); }
}

.project-card-enhanced {
  animation: cardFloat 6s ease-in-out infinite;
}

.project-card-enhanced:nth-child(2) { animation-delay: -2s; }
.project-card-enhanced:nth-child(3) { animation-delay: -4s; }

/* Responsive Enhancements */
@media (max-width: 768px) {
  .section-title-enhanced {
    font-size: 2rem;
  }
  
  .title-icon {
    font-size: 1.8rem;
  }
  
  .project-img-wrapper-enhanced {
    height: 180px;
  }
  
  .overlay-actions {
    flex-direction: column;
    gap: 0.5rem;
  }
  
  .action-btn-enhanced {
    width: 120px;
    text-align: center;
  }
  
  .project-status-badge {
    top: 0.7rem;
    right: 0.7rem;
    padding: 0.3rem 0.6rem;
    font-size: 0.7rem;
  }
}

@media (max-width: 480px) {
  .project-title-enhanced {
    font-size: 1.2rem;
  }
  
  .tech-badge-enhanced {
    font-size: 0.75rem;
    padding: 0.3rem 0.6rem;
  }
  
  .empty-state-enhanced {
    padding: 3rem 1.5rem;
  }
  
  .empty-title {
    font-size: 1.5rem;
  }
}

/* Print Styles */
@media print {
  .project-overlay-enhanced,
  .card-shine-enhanced,
  .project-status-badge {
    display: none !important;
  }
  
  .project-card-enhanced {
    box-shadow: none !important;
    border: 1px solid #ccc !important;
    break-inside: avoid;
  }
}

/* Accessibility */
@media (prefers-reduced-motion: reduce) {
  .project-card-enhanced,
  .title-icon,
  .status-dot {
    animation: none !important;
  }
  
  * {
    transition-duration: 0.01ms !important;
  }
}

/* Focus Styles */
.action-btn-enhanced:focus {
  outline: 2px solid var(--project-accent);
  outline-offset: 2px;
}

/* High Contrast Mode */
@media (prefers-contrast: high) {
  .project-card-enhanced {
    border: 2px solid var(--project-text);
  }
  
  .tech-badge-enhanced {
    border: 2px solid var(--project-accent);
  }
}
</style>

<script>
document.addEventListener("DOMContentLoaded", function () {
  // Enhanced tooltips
  const tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
  tooltipTriggerList.map(function (tooltipTriggerEl) {
    return new bootstrap.Tooltip(tooltipTriggerEl);
  });

  // Enhanced card interactions
  const projectCards = document.querySelectorAll('.project-card-enhanced');
  
  projectCards.forEach(card => {
    card.addEventListener('mouseenter', function() {
      this.style.animationPlayState = 'paused';
    });
    
    card.addEventListener('mouseleave', function() {
      this.style.animationPlayState = 'running';
    });
  });

  // Image error handling
  const projectImages = document.querySelectorAll('.project-img-enhanced');
  
  projectImages.forEach(img => {
    img.addEventListener('error', function() {
      const wrapper = this.parentElement;
      wrapper.style.display = 'flex';
      wrapper.style.alignItems = 'center';
      wrapper.style.justifyContent = 'center';
      wrapper.innerHTML = `
        <div style="text-align: center; color: var(--project-text-secondary);">
          <i class="fas fa-image" style="font-size: 2.5rem; margin-bottom: 0.5rem; opacity: 0.5;"></i>
          <p style="font-size: 0.9rem; margin: 0;">Project Image</p>
        </div>
      `;
    });
  });

  // Initialize AOS if available
  if (typeof AOS !== 'undefined') {
    AOS.refresh();
  }

  console.log('%cðŸŽ¯ Enhanced Projects Loaded!', 'color: #06b6d4; font-size: 16px; font-weight: bold;');
});
</script>

{% endblock %}